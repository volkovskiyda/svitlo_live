# üü° Svitlo.live

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–ª—è **Home Assistant**, —â–æ –ø–æ–∫–∞–∑—É—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è —É –≤–∞—à—ñ–π –æ–±–ª–∞—Å—Ç—ñ —Ç–∞ —á–µ—Ä–∑—ñ –∑–∞ –¥–∞–Ω–∏–º–∏ —Å–µ—Ä–≤—ñ—Å—É [svitlo.live](https://svitlo.live).

–¶–µ **–Ω–æ–≤–∞ –≤–µ—Ä—Å—ñ—è (v2)**, —â–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ–π—à–ª–∞ –Ω–∞ **API –Ω–∞–¥–∞–Ω–∏–π —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º–∏ svitlo.live** —Å–∞–π—Ç—É –∑–∞–º—ñ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥—É HTML —Å–∞–π—Ç—É svitlo.live.  
–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞ –∑ –Ω—É–ª—è: —à–≤–∏–¥—à–∞, –±–µ–∑–ø–µ—á–Ω—ñ—à–∞ —Ç–∞ –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ –ü–æ–∫–∞–∑—É—î **–ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å** —Å–≤—ñ—Ç–ª–∞ (`–Ñ / –ù–µ–º–∞—î`),  
- ‚úÖ –í–∏–∑–Ω–∞—á–∞—î **–Ω–∞—Å—Ç—É–ø–Ω–µ –≤–º–∏–∫–∞–Ω–Ω—è** —Ç–∞ **–≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó,  
- ‚úÖ –ü–æ–∫–∞–∑—É—î —á–∞—Å **–æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É**,  
- ‚úÖ –ú–∞—î **–≤–±—É–¥–æ–≤–∞–Ω—É –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—é** (UA / EN),  
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î **—É—Å—ñ –æ–±–ª–∞—Å—Ç—ñ –£–∫—Ä–∞—ó–Ω–∏** —ñ —Ç–∏–ø–∏ —á–µ—Ä–≥ / –≥—Ä—É–ø (1.1‚Äì6.2, 1‚Äì6, 1‚Äì12),  
- ‚úÖ –ú–æ–∂–µ –º–∞—Ç–∏ **–¥–æ–≤—ñ–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å entry** (–æ–±–ª–∞—Å—Ç–µ–π/—á–µ—Ä–≥) –≤ –æ–¥–Ω–æ–º—É Home Assistant,  
- ‚úÖ –£—Å—ñ entry –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è —á–µ—Ä–µ–∑ **–æ–¥–∏–Ω —Å–ø—ñ–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ API**, —â–æ–± –∑–º–µ–Ω—à–∏—Ç–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è,  
- ‚úÖ –°–µ–Ω—Å–æ—Ä–∏ —Ç–∞ –±—ñ–Ω–∞—Ä–Ω—ñ —Å–µ–Ω—Å–æ—Ä–∏ –∑—Ä—É—á–Ω—ñ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ–π —Ç–∞ –¥–∞—à–±–æ—Ä–¥—ñ–≤.

---

## üîÑ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏

### üß© –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö —à–∞—Ä—ñ–≤:

1. **`SvitloApiHub` (api_hub.py)**  
   –û–¥–∏–Ω —Å–ø—ñ–ª—å–Ω–∏–π —Ö–∞–± –¥–ª—è –≤—Å—ñ—Ö entry.  
   - –†–æ–±–∏—Ç—å **–æ–¥–∏–Ω HTTP-–∑–∞–ø–∏—Ç** –¥–æ –ø—Ä–æ–∫—Å—ñ—Å–µ—Ä–≤–µ—Ä–∞ (Cloudflare Worker) –∑ –∫–ª—é—á–µ–º API.  
   - –ó–±–µ—Ä—ñ–≥–∞—î –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ –≤ –∫–µ—à –Ω–∞ 15 —Ö–≤.  
   - –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î –¥—É–±–ª—é—é—á–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É Home Assistant.

2. **`SvitloCoordinator` (coordinator.py)**  
   –û–∫—Ä–µ–º–∏–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–æ–¥–∞–Ω–æ–≥–æ —Ä–µ–≥—ñ–æ–Ω—É/—á–µ—Ä–≥–∏.  
   - –û—Ç—Ä–∏–º—É—î —Ä–æ–∑–∫–ª–∞–¥ –∑ —Ö–∞–±–∞ (`api_hub`), –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –≤ –º–µ—Ä–µ–∂—É.
   - –†–æ–∑—É–º–Ω–∏–π –≤–∏–±—ñ—Ä –ø—Ä–æ–∫—Å—ñ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –º—ñ–∂ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º API (–¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ –æ–±–ª–∞—Å—Ç–µ–π) —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º –î–¢–ï–ö-–ø—Ä–æ–∫—Å—ñ (–¥–ª—è –ö–∏—î–≤–∞, –û–¥–µ—Å–∏ —Ç–∞ –î–Ω—ñ–ø—Ä–∞) –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ.
   - –ê–Ω–∞–ª—ñ–∑—É—î –ø—ñ–≤–≥–æ–¥–∏–Ω–Ω—ñ —Å–ª–æ—Ç–∏, —Ñ–æ—Ä–º—É—î —Å—Ç–∞–Ω–∏ (`on/off`).  
   - –ü–ª–∞–Ω—É—î **—Ç–æ—á–Ω–µ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –µ–Ω—Ç–∏—Ç—ñ –≤ –º–æ–º–µ–Ω—Ç –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è/–≤–∫–ª—é—á–µ–Ω–Ω—è** –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–≤–µ—Ä–Ω–µ–Ω—å –¥–æ API.

### üïí –¢–∞–π–º–∑–æ–Ω–∞
- API –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–æ–∑–∫–ª–∞–¥ —É **–ª–æ–∫–∞–ª—å–Ω–æ–º—É —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–º—É —á–∞—Å—ñ (Europe/Kyiv)**.  
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ—Ä–µ–∫—Ç–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î —Ü–µ–π —á–∞—Å —É UTC –¥–ª—è Home Assistant,  
  —Ç–æ–º—É –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–∞—à–æ—ó —á–∞—Å–æ–≤–æ—ó –∑–æ–Ω–∏ –≤—Å–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç–æ—á–Ω–æ.

---

## üîê –Ø–∫ –∑–∞—Ö–∏—â–µ–Ω–æ –∫–ª—é—á API

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è **–Ω–µ –º—ñ—Å—Ç–∏—Ç—å –∫–ª—é—á API –≤—ñ–¥–∫—Ä–∏—Ç–æ**.

–î–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ `https://svitlo.live/api/asistant.php` —Å—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π **Cloudflare Worker**, —è–∫–∏–π:
- –∑–±–µ—Ä—ñ–≥–∞—î –∫–ª—é—á `x-api-key` —É –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ Worker‚Äô–∞,
- –ø—Ä–∏–π–º–∞—î –±–µ–∑–ø–µ—á–Ω–∏–π –∑–∞–ø–∏—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó,
- –ø–µ—Ä–µ—Å–∏–ª–∞—î –∑–∞–ø–∏—Ç –¥–æ `svitlo.live` —ñ –ø–æ–≤–µ—Ä—Ç–∞—î JSON-–≤—ñ–¥–ø–æ–≤—ñ–¥—å.

### –î–ª—è —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –î–¢–ï–ö (–ö–∏—ó–≤, –û–¥–µ—Å–∞, –î–Ω—ñ–ø—Ä–æ):
–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –æ–∫—Ä–µ–º–∏–π –ø—Ä–æ–∫—Å—ñ —Å–µ—Ä–≤–µ—Ä —è–∫ –¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö (dtek-api), —è–∫–∏–π –∞–≥—Ä–µ–≥—É—é—Ç—å—Å—è  –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö —Å–∞–π—Ç—ñ–≤ –î–¢–ï–ö, –≥–∞—Ä–∞–Ω—Ç—É—é—á–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å –≥—Ä–∞—Ñ—ñ–∫—ñ–≤, –Ω–∞–≤—ñ—Ç—å –∫–æ–ª–∏ –ê–†–Ü svitlo.live –≤—ñ–¥—Å—Ç–∞—î –≤—ñ–¥ –æ–Ω–æ–≤–ª–µ–Ω—å –≥—Ä–∞—Ñ—ñ–∫—ñ–≤.

---

## üß† –Ø–∫ —á–∞—Å—Ç–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –¥–∞–Ω—ñ

- –ö–æ–∂–Ω—ñ 15 —Ö–≤–∏–ª–∏–Ω Home Assistant –æ—Ç—Ä–∏–º—É—î –Ω–æ–≤—ñ –¥–∞–Ω—ñ –∑ API.
- –ö–µ—à API –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è **15 —Ö–≤–∏–ª–∏–Ω**.
- –ü—Ä–æ–º—ñ–∂ –æ–Ω–æ–≤–ª–µ–Ω—å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è **—Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–º–∏–∫–∞—î —Å—Ç–∞–Ω–∏** —Ç–æ—á–Ω–æ –∑–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º (–ø—ñ–≤–≥–æ–¥–∏–Ω–Ω—ñ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏).  
  –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –æ 17:30, —Å–µ–Ω—Å–æ—Ä ‚ÄúElectricity‚Äù –∑–º—ñ–Ω–∏—Ç—å—Å—è **—Ä—ñ–≤–Ω–æ –æ 17:30**, –Ω–∞–≤—ñ—Ç—å –±–µ–∑ –∑–∞–ø–∏—Ç—É –¥–æ API.

---

## üß© –°—Ç–≤–æ—Ä—é–≤–∞–Ω—ñ entity

| –¢–∏–ø | –ù–∞–∑–≤–∞ | –û–ø–∏—Å |
|-----|-------|------|
| üü¢  **Binary Sensor** | `Electricity status` | –£–≤—ñ–º–∫–Ω–µ–Ω–æ / –í–∏–º–∫–Ω–µ–Ω–æ —Å–≤—ñ—Ç–ª–æ |
| üìò  **Sensor** | `Electricity` | –¢–µ–∫—Å—Ç–æ–≤–∏–π —Å—Ç–∞—Ç—É—Å: ‚ÄúGrid ON / OFF‚Äù |
| ‚è∞  **Sensor** | `Next grid connection` | –ß–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤–º–∏–∫–∞–Ω–Ω—è (—è–∫—â–æ –∑–∞—Ä–∞–∑ –≤–∏–º–∫–Ω–µ–Ω–æ) |
| ‚ö†Ô∏è **Sensor** | `Next outage` | –ß–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (—è–∫—â–æ –∑–∞—Ä–∞–∑ —É–≤—ñ–º–∫–Ω–µ–Ω–æ) |
| üîÑ  **Sensor** | `Schedule updated` | –ß–∞—Å –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è API |
| üìÖ  **Calendar** | `calendar.svitlo_<region>_<queue>` |  ‚Äúüí° Electricity available‚Äù | –ë–ª–æ–∫–∏ —á–∞—Å—É, –∫–æ–ª–∏ —î —Å–≤—ñ—Ç–ª–æ (Kyiv local time) |
| ‚è≥  **Sensor** |**Minutes to grid connection** |–ü–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö–≤–∏–ª–∏–Ω –¥–æ **–Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞**. –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥. –ê–∫—Ç–∏–≤–Ω–∏–π –ª–∏—à–µ –∫–æ–ª–∏ —Å–≤—ñ—Ç–ª–æ **–≤–∏–º–∫–Ω–µ–Ω–µ**.|
| ‚è±   **Sensor** | **Minutes to outage** |–ü–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö–≤–∏–ª–∏–Ω –¥–æ **–Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è**. –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥. –ê–∫—Ç–∏–≤–Ω–∏–π –ª–∏—à–µ –∫–æ–ª–∏ —Å–≤—ñ—Ç–ª–æ **—É–≤—ñ–º–∫–Ω–µ–Ω–µ**.|

---

## üåç –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –æ–±–ª–∞—Å—Ç—ñ

–£—Å—ñ –æ–±–ª–∞—Å—Ç—ñ –£–∫—Ä–∞—ó–Ω–∏ (–Ω–µ–æ–∫—É–ø–æ–≤–∞–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏), –∫—Ä—ñ–º —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏—Ö (–Ω–∞—Ä–∞–∑—ñ –•–µ—Ä—Å–æ–Ω—Å—å–∫–∞).  
–î–ª—è –ß–µ—Ä–Ω—ñ–≤–µ—Ü—å–∫–æ—ó —Ç–∞ –î–æ–Ω–µ—Ü—å–∫–æ—ó ‚Äî ‚Äú–ì—Ä—É–ø–∞ N‚Äù, —ñ–Ω—à—ñ ‚Äî ‚Äú–ß–µ—Ä–≥–∞ N.M‚Äù.

---

## üß∞ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ HACS

1. –í—ñ–¥–∫—Ä–∏–π HACS ‚Üí **Integrations ‚Üí Custom repositories**.  
2. –î–æ–¥–∞–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
   ```
   https://github.com/chaichuk/svitlo_live
   ```
   —Ç–∏–ø ‚Äî *Integration*.
3. –í—Å—Ç–∞–Ω–æ–≤–∏ `Svitlo.live` —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Home Assistant.
4. –î–æ–¥–∞–π —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é —á–µ—Ä–µ–∑ `Settings ‚Üí Devices & Services ‚Üí + Add Integration ‚Üí Svitlo.live`.


## –†–∞–∑–æ–º –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è blueprint –¥–ª—è —â–æ–¥–µ–Ω–Ω–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –≥—Ä–∞—Ñ—ñ–∫ –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è.
### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ç–∞ —Å—Ü–µ–Ω–∏**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—é ‚Üí –ü–æ—á–∞—Ç–∏ –∑ blueprint**
3. –í–∏–±–µ—Ä—ñ—Ç—å **"Svitlo Live: ....."**
4. –ó–∞–ø–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–ª—è.

# üí° –ê–≤—Ç–æ—Ä

- github: @chaichuk
- TG: @serhii_chaichuk
